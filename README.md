# Проектирование баз данных

## Вариант №2 (1-8)

Садоводство: участки, владельцы с учетом совместной собственности, линии/номер участка,
площадь стоимость постройки, тип построек ,взносы в фонд садоводства

1. (a) номера участков владельцев с отчеством, заканчивающимся на «ич»
2. (б) участки, на которых зарегистрировано более 1 типа постройки
3. (в) тип взносов, которые пока никто не оплатил
4. (г) Владелец (владельцы) участка максимальной площади
5. (д) Владельцы участков с максимальным числом типов построек
6. (е) Владельцы, оплатившие все типы взносов
7. (ж) Участки, на которых нет бань, но есть туалеты

## Задание

### ЛР №1 Разработка физической модели базы данных с учетом декларативной ссылочной целостности

Создать физическую модель базы данных, находящуюся в третьей нормальной форме в
соответствии с заданным вариантом. Расписать ссылочную целостность БД в таблице

### ЛР №2 Создание и модификация базы данных и таблиц базы данных

По аналогии с примерами, приведенными в п. 1 и создать базу данных с разработанной
физической моделью. Продемонстрировать умение добавить и удалить столбец командой alter table

### ЛР №3 Заполнение таблиц и модификация данных

По аналогии с примерами, приведенными в п. 1 Выполнить вставку тестовых данных в
таблицы, созданные в ходе выполнения лабораторной работы 2. В строках, вставляемых в таблицы,
должны быть данные как удовлетворяющие, так и не удовлетворяющие условиям запросов,
приведенных в варианте задания. Необходимо привести свои пример использования оператором update
и delete и merge

### ЛР №4 Разработка SQL запросов: виды соединений и шаблоны

По аналогии с примерами, приведенными в п. 1 и 2 реализовать запросы а) .. в), указанные в
варианте задания. Все запросы должны не содержать вложенных запросов или агрегатных функций.
(Используйте псевдонимы)

### ЛР №5 Разработка SQL запросов: запросы с подзапросами

По аналогии с примерами, приведенными в п. 1 реализовать запросы г) .. ж), указанные в
варианте задания.

* Один из запросов на максимум/минимум реализовать с помощью директивы all
* Запрос на «все» (реляционное деление) реализовать с помощью 2 not exists
* Запросы на разность реализовать в 3 вариантах: Not in, except (MySQL не поддерживает,
поэтому только синтаксис), с использованием левого/правого соединения

### ЛР №6 Хранимые процедуры

По аналогии с примерами, приведенными в п. 1, создать в БД ХП, реализующие:
- вставку с пополнением справочников (вставляется информация о студенте, если указанный номер
группы отсутствует в БД, запись добавляется в таблицу с перечнем групп) (получаем ссылку на
внешний ключ по значению данного из родительской таблицы);
- удаление с очисткой справочников – удаление всех зависимых данных (удаляется информация о
студенте, если в его группе нет больше студентов, запись удаляется из таблицы с перечнем групп);
- каскадное удаление (перед удалением записи о группе удаляются записи обо всех студентах этой
группы);
- вычисление и возврат значения агрегатной функции (т.к. агрегатная функция дает единственный
результат);
- формирование статистики во временной таблице (например, для рассматриваемой БД — для
каждого факультета: количество групп, количество обучающихся студентов, ко-личество изучаемых
дисциплин, количество сданных дисциплин, средний балл по факульте-ту).

### ЛР №7 Триггеры. Обеспечение активной целостности данных базы данных

По аналогии с примерами, приведенными в п. 1 реализовать для своей базы данных триггеры
для всех событий (insert,delete, update) до и после. Часть из которых будет обеспечивать ссылочную
целостность, остальные могут иметь другое назначение из 3 предложенных. Вычислимые поля
можно добавить при необходимости

---

## Вариант №2 (9-12)

Садоводческое товарищество: объекты общего пользования (колонки, помойка, магазин)
участки, владельцы с учетом совместной собственности, линии/номер участка, площадь
стоимость постройки, тип построек ,взносы в фонд садоводства

1. (а) номера участков владельцев с отчеством, заканчивающимся на «вна»
2. (б) участки в том числе общего пользования, на которых зарегистрировано более 1 постройки
3. (в) владелец (владельцы) участка максимальной площади
4. (г) владельцы максимального количества участков
5. (д) участки, на которых нет бань

## Задание

### ЛР №9

Спроектировать физическую модель базы данных, находящуюся в третьей нормальной форме
и включающей наследование и хотя бы один пользовательский тип в соответствии с заданным
вариантом. Написать соответствующий скрипт создания базы данных.




## Замечание

> Скрипты представлены для PostgreSQL 10
